(()=>{"use strict";var e,t={1348:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});const n=a.p+"images/44a4fc1517928e38cbbb19e5810ce16c-label.svg"},4559:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});const n=a.p+"images/d3f95968fdd836be72f8024bcc65194b-logoDark.svg"},380:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});const n=a.p+"images/8a3f225facad69ea0aafb53ddb6968ce-logoLight.svg"},2828:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const l=n(a(3732)),r=n(a(5815)),o=a(9826),i=a(7908),u=a(4196),s=a(9521),c=a(2346),d=a(1555),f=a(6454),p=a(7477),m=a(8650),h=a(1953),g=a(9654);t.App=()=>l.default.createElement(g.ProvideAppState,null,l.default.createElement(v,null));const y=r.default.div`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
`,b=()=>{const{data:e,visible:t,agencies:a,updateBbox:n}=(0,f.useData)();return l.default.createElement(y,null,l.default.createElement(i.OverviewMap,{data:e,updateBbox:n}),l.default.createElement(s.Controls,null),l.default.createElement(c.SettingsDrawer,null),l.default.createElement(m.LegendDrawer,{visible:t,data:e,allAgencies:a}),l.default.createElement(d.Logo,null))},v=()=>{const e=(0,o.useMediaQuery)("(prefers-color-scheme: dark)"),{appTheme:t}=(0,g.useAppState)(),a=l.default.useMemo((()=>{const a="system"===t&&e||"dark"===t;return(0,u.themeFactory)(a)}),[e,t]);return l.default.createElement(o.StyledEngineProvider,{injectFirst:!0},l.default.createElement(o.ThemeProvider,{theme:a},l.default.createElement(f.ProvideData,null,l.default.createElement(p.ProvideWindow,null,l.default.createElement(h.ProvideMapTarget,null,l.default.createElement(b,null))))))}},4196:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.themeFactory=void 0;const n=a(9826);t.themeFactory=(e=!1)=>(0,n.createTheme)({palette:e?r:l});const l={mode:"light",primary:{main:"#cc0000"},secondary:{main:"#cc0000"}},r={mode:"dark",primary:{main:"#ff4f30"},secondary:{main:"#ff4f30"}}},9643:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isLineEnabled=t.useIsDarkTheme=void 0;const n=a(9826);t.useIsDarkTheme=e=>{const t=(0,n.useMediaQuery)("(prefers-color-scheme: dark)");return"system"===e&&t||"dark"===e},t.isLineEnabled=(e,t)=>{var a;if(void 0===e)return!0;if(e.startsWith("!")){const a=e.split(",");let n=!0;return a.forEach((e=>{var a;n&&(n=!(null!==(a=t[e.slice(1)])&&void 0!==a&&a))})),n}return null!==(a=t[e])&&void 0!==a&&a}},5786:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Chevron=void 0;const l=n(a(5815));t.Chevron=l.default.div`
  display: inline-block;
  margin-top: 4px;
  width: 24px;
  height: 20px;
  &:before {
    width: 3px;
    height: 10px;
    transition: all 0.5s cubic-bezier(0.33, 1, 0.68, 1);
    display: inline-block;
    border-radius: 2px;
    background: ${e=>{var t;return null!==(t=e.color)&&void 0!==t?t:"#FFFFFF"}};
    transform: ${e=>e.down?"rotate(-135deg)":"rotate(-45deg)"};
    content: "";
  }
  &:after {
    width: 3px;
    height: 10px;
    transition: all 0.5s cubic-bezier(0.33, 1, 0.68, 1);
    display: inline-block;
    border-radius: 2px;
    background: ${e=>{var t;return null!==(t=e.color)&&void 0!==t?t:"#FFFFFF"}};
    transform: ${e=>e.down?"rotate(-45deg)":"rotate(-135deg)"};
    content: "";
    margin-left: 3px;
  }
`},2931:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MapIcon=void 0;const o=r(a(3732)),i=a(6823);t.MapIcon=({width:e,height:t,...a})=>{const n=(0,o.useRef)(new Image(e,t)),[l,r]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const e=n.current;e.onload=()=>{r(!0)},e.src=a.url}),[a.style]),l?o.default.createElement(i.Image,{id:a.id,image:n.current}):o.default.createElement(o.default.Fragment,null)}},2127:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Lines=void 0;const o=r(a(3732)),i=a(6823),u=a(7908),s=a(9643),c=a(9654);t.Lines=o.default.memo((({data:e,showLineLabels:t})=>{const{labelStyle:a}=(0,o.useContext)(u.LabelProviderContext),{appTheme:n}=(0,c.useAppState)(),l=(0,s.useIsDarkTheme)(n);return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.Source,{id:"raildata",type:"geojson",data:e}),o.default.createElement(i.Layer,{id:"yard-tracks",source:"raildata",type:"line",filter:["all",["==",["get","type"],"tracks"],["==",["get","class"],"rail-yard"]],layout:{"line-join":"round","line-cap":"round","line-sort-key":["get","layer"]},paint:{"line-color":"#818181","line-width":3,"line-offset":["*",["get","offset"],3]}}),o.default.createElement(i.Layer,{id:"rail-tunnel",source:"raildata",type:"fill",filter:["all",["==",["get","type"],"tunnel"]],minzoom:14,layout:{"fill-sort-key":["get","layer"]},paint:{"fill-color":"#212121","fill-opacity":["interpolate",["linear"],["zoom"],14,0,15,.3]}}),o.default.createElement(i.Layer,{id:"rail-alignment",source:"raildata",type:"line",filter:["==",["get","type"],"alignment"],layout:{"line-join":"round","line-cap":"round","line-sort-key":["get","layer"]},paint:{"line-color":["get","color"],"line-opacity":["interpolate",["linear"],["zoom"],14,1,20,.3],"line-width":["interpolate",["exponential",2],["zoom"],14,3,20,150],"line-offset":["interpolate",["exponential",2],["zoom"],14,["*",["get","offset"],3],20,["*",["get","offset"],150]]}}),o.default.createElement(i.Layer,{id:"rail-tracks",source:"raildata",type:"line",filter:["all",["==",["get","type"],"tracks"],["==",["get","class"],"rail-line"]],layout:{"line-join":"round","line-cap":"round","line-sort-key":["get","layer"]},paint:{"line-color":["get","color"],"line-width":3,"line-offset":["*",["get","offset"],3]}}),o.default.createElement(i.Layer,{id:"rail-tracks-future",source:"raildata",type:"line",filter:["==",["get","type"],"tracks-future"],layout:{"line-join":"round","line-cap":"round","line-sort-key":["get","layer"]},paint:{"line-color":["get","color"],"line-width":3,"line-dasharray":[3,3]}}),o.default.createElement(i.Layer,{id:"rail-overpass",source:"raildata",type:"line",filter:["==",["get","type"],"overpass"],minzoom:14,layout:{"line-join":"round","line-cap":"butt","line-sort-key":["get","layer"]},paint:{"line-color":["get","color"],"line-width":1,"line-gap-width":["interpolate",["exponential",2],["zoom"],15,0,18,15],"line-offset":["*",["get","offset"],3]}}),o.default.createElement(i.Layer,{id:"rail-platforms",source:"raildata",type:"fill",filter:["==",["get","type"],"station-platforms"],layout:{"fill-sort-key":["get","layer"]},paint:{"fill-color":["get","color"],"fill-opacity":.68}}),o.default.createElement(i.Layer,{id:"rail-platforms-future",source:"raildata",type:"line",filter:["==",["get","type"],"station-platforms-future"],layout:{"line-sort-key":["get","layer"]},paint:{"line-color":["get","color"],"line-dasharray":[3,3],"line-width":1.5}}),o.default.createElement(i.Layer,{id:"rail-connector-labels-dash",source:"raildata",type:"line",filter:["==",["get","type"],"station-connector-label"],minzoom:15,layout:{"line-cap":"round"},paint:{"line-width":2,"line-color":l?"#FFFFFF":"#212121","line-gap-width":10,"line-dasharray":[4,4]}}),o.default.createElement(i.Layer,{id:"rail-station",source:"raildata",type:"circle",filter:["==",["get","type"],"station-label"],layout:{},paint:{"circle-color":"#ffffff","circle-stroke-color":"#212121","circle-stroke-width":2,"circle-radius":["interpolate",["linear"],["zoom"],10,2,13.5,6],"circle-pitch-alignment":"map"}}),o.default.createElement(i.Layer,{id:"rail-connector-labels-bg",source:"raildata",type:"line",filter:["==",["get","type"],"station-connector-label"],maxzoom:16,layout:{"line-cap":"round"},paint:{"line-width":["interpolate",["linear"],["zoom"],10,8,13.5,16],"line-color":"#212121","line-opacity":["interpolate",["linear"],["zoom"],15,1,16,0]}}),o.default.createElement(i.Layer,{id:"rail-connector-labels",source:"raildata",type:"line",filter:["==",["get","type"],"station-connector-label"],maxzoom:16,layout:{"line-cap":"round"},paint:{"line-width":["interpolate",["linear"],["zoom"],10,4,13.5,12],"line-color":"#FFFFFF","line-opacity":["interpolate",["linear"],["zoom"],15,1,16,0]}}),t&&o.default.createElement(i.Layer,{id:"yard-labels",source:"raildata",type:"symbol",filter:["==","type","yard-label"],minzoom:11,layout:{"text-field":["get","name"],"text-anchor":"center","text-optional":!0,"text-font":["Raleway Bold"],"text-size":16,"icon-image":"label-background","icon-text-fit":"both","icon-text-fit-padding":[1,4,0,4]},paint:{"text-color":"#FFFFFF"}}),t&&o.default.createElement(i.Layer,{id:"rail-labels",source:"raildata",type:"symbol",filter:["==",["get","type"],"station-label"],minzoom:13,layout:{"text-field":a,"text-anchor":"left","text-offset":[.75,0],"text-font":["Raleway Bold"],"text-size":16,"icon-image":"label-background","icon-text-fit":"both","icon-text-fit-padding":[1,4,0,4]},paint:{"text-color":"#FFFFFF"}}),t&&o.default.createElement(i.Layer,{id:"rail-labels-major",source:"raildata",type:"symbol",filter:["all",["==",["get","type"],"station-label"],["==",["get","major"],!0]],maxzoom:13,minzoom:9,layout:{"text-field":a,"text-anchor":"left","text-offset":[.75,0],"text-font":["Raleway Bold"],"text-size":16,"icon-image":"label-background","icon-text-fit":"both","icon-text-fit-padding":[1,4,0,4]},paint:{"text-color":"#FFFFFF"}}))}))},1555:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Logo=void 0;const l=n(a(3732)),r=a(9643),o=n(a(380)),i=n(a(4559)),u=a(9654),s=n(a(5815)).default.img`
  position: fixed;
  width: 140px;
  bottom: ${({theme:e})=>e.spacing(2)};
  left: calc(50% - 70px);
`;t.Logo=()=>{const{appTheme:e}=(0,u.useAppState)(),t=(0,r.useIsDarkTheme)(e);return l.default.createElement("a",{href:"https://www.railfans.ca"},l.default.createElement(s,{src:t?i.default:o.default}))}},7908:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OverviewMap=t.LabelProviderContext=void 0;const i=r(a(3732)),u=r(a(6823));a(6313);const s=a(2127),c=a(9643),d=a(2931),f=a(7477),p=o(a(1348)),m=a(1953),h=a(9654),g=a(8448),y=a(1987);t.LabelProviderContext=i.default.createContext({labelStyle:[]});const b={type:"FeatureCollection",features:y.config.regions.map((e=>({type:"Feature",bbox:e.bbox,geometry:{type:"Point",coordinates:e.location},properties:{type:"region-label",id:e.id,name:e.title,target:e.bbox}})))};t.OverviewMap=e=>{const a=(0,g.useTheme)(),n=(0,f.useWindow)(),{legendDrawerOpen:l,settingsDrawerOpen:r,appTheme:o,mapStyle:y,show3DBuildings:v,showLabels:E,lineFilterState:w,setLastLocation:_}=(0,h.useAppState)(),S=null!=localStorage.settings?JSON.parse(localStorage.settings).lastLocation:null,x=e.data,O=(0,i.useRef)(),[k,j]=(0,i.useState)(null),[M,L]=(0,i.useState)(!1),[C,F]=(0,i.useState)(S?{longitude:S[0],latitude:S[1],zoom:S[2],bearing:S[3]}:{longitude:-79.3934,latitude:43.7169,zoom:11.25}),{target:T,setTarget:D}=(0,m.useMapTarget)();(0,i.useEffect)((()=>{var e;if(null!=T){const t=null===(e=O.current)||void 0===e?void 0:e.getMap();null==t||t.fitBounds(T,{padding:64})}}),[T]),(0,i.useEffect)((()=>{var e,t;const o=r||l;if(n[0]>a.breakpoints.values.md){const a={right:o?420:0};null===(t=null===(e=O.current)||void 0===e?void 0:e.getMap())||void 0===t||t.easeTo({padding:a})}}),[r,l,n]);const P=(0,c.useIsDarkTheme)(o),[B,I]=(0,i.useState)("satellite"===y?"mapbox://styles/mapbox/satellite-streets-v11":P?"mapbox://styles/mapbox/dark-v10":"mapbox://styles/mapbox/light-v10"),[z,A]=(0,i.useState)([]);(0,i.useEffect)((()=>{I("satellite"===y?"mapbox://styles/mapbox/satellite-streets-v11":P?"mapbox://styles/mapbox/dark-v10":"mapbox://styles/mapbox/light-v10")}),[P,o,y]),(0,i.useEffect)((()=>{var e,t;A((e=x,t=w,["format",["get","name"],{}," ",{},...Object.values(e).filter((e=>null!=e.metadata.icon&&(0,c.isLineEnabled)(e.metadata.filterKey,t))).map((e=>e.metadata.id)).sort().flatMap((e=>[["case",["in",e,["get","lines"]],["image",e],""],{}]))]))}),[x,w]),(0,i.useEffect)((()=>{const e=Object.values(x).filter((e=>(0,c.isLineEnabled)(e.metadata.filterKey,w))).flatMap((e=>e.features.map((t=>({...t,properties:{...t.properties,class:e.metadata.type,color:e.metadata.color,offset:e.metadata.offset,alternatives:t.properties.alternatives}})))));j({type:"FeatureCollection",features:e})}),[x,w]);const $=["rail-station","rail-labels","yard-labels","regions-labels"];return i.default.createElement(u.default,{style:{width:n[0],height:n[1]},mapStyle:B,accessToken:"pk.eyJ1IjoiZGVsbGlzZCIsImEiOiJjazBoZm03OG8wMjR2M2lxbjNqcHgyc3BvIn0.XPgZCMrBCvS-usaM2bnjlA",hash:!0,onViewportChange:t=>{var a;if(F(t),D(void 0),_([t.longitude,t.latitude,t.zoom,null!==(a=t.bearing)&&void 0!==a?a:0]),null!=O.current){const t=O.current.getMap().getBounds();e.updateBbox([t.getWest(),t.getSouth(),t.getEast(),t.getNorth()])}},onClick:[$,e=>{if(null!=e.features)for(let t of e.features){if("station-label"===t.properties.type){null!=t.properties.url&&"null"!==t.properties.url&&(window.parent.location.href=`https://www.railfans.ca/${t.properties.url}`);break}if("region-label"===t.properties.type){D(JSON.parse(t.properties.target));break}}}],onMouseenter:[$,e=>{var t,a;const n=null===(a=null===(t=O.current)||void 0===t?void 0:t.getMap())||void 0===a?void 0:a.getCanvas();null!=n&&(n.style.cursor="pointer")}],onMouseleave:[$,e=>{var t,a;const n=null===(a=null===(t=O.current)||void 0===t?void 0:t.getMap())||void 0===a?void 0:a.getCanvas();null!=n&&(n.style.cursor="")}],onLoad:()=>{L(!0)},ref:O,...C,attributionControl:!1},M&&i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Source,{id:"regions",type:"geojson",data:b}),i.default.createElement(u.AttributionControl,{compact:!1,position:"bottom-right",customAttribution:`Updated on ${new Date(1642785360685).toLocaleDateString()}`}),i.default.createElement(u.NavigationControl,{showCompass:!0,showZoom:!0,position:"bottom-right"}),i.default.createElement(t.LabelProviderContext.Provider,{value:{labelStyle:z}},Object.values(x).filter((e=>null!=e.metadata.icon)).map((e=>i.default.createElement(d.MapIcon,{style:B,width:16,height:16,id:e.metadata.id,key:e.metadata.id,url:`icons/${e.metadata.icon}`}))),i.default.createElement(d.MapIcon,{style:B,width:24,height:24,id:"label-background",url:p.default}),i.default.createElement(u.Layer,{id:"sky",type:"sky",paint:{"sky-atmosphere-sun":P?[0,95]:[0,0]}}),v&&i.default.createElement(u.Layer,{id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":P?"#212121":"#FFFFFF","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}}),i.default.createElement(s.Lines,{data:k,showLineLabels:E})),i.default.createElement(u.Layer,{id:"regions-labels",source:"regions",type:"symbol",layout:{"text-field":["get","name"],"text-size":20},paint:{"text-color":P?"#FFFFFF":"#121212","text-halo-color":P?"#121212":"#FFFFFF","text-halo-width":2},maxzoom:9})))}},9521:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Controls=void 0;const i=r(a(3732)),u=a(9826),s=a(54),c=a(4632),d=o(a(5815)),f=a(1987),p=a(1953),m=a(9654),h=o(a(1941)),g=d.default.div`
  position: fixed;
  right: ${({theme:e})=>e.spacing(1)};
  top: ${({theme:e})=>e.spacing(1)};
  display: flex;
  flex-direction: column;
  justify-content: space-between;
`,y=(0,d.default)(u.Paper)`
  margin: ${({theme:e})=>e.spacing(.5)} 0;

  &:first-child {
    margin-top: 0;
  }

  &:last-child {
    margin-bottom: 0;
  }
`,b=e=>{const{setTarget:t}=(0,p.useMapTarget)();return i.default.createElement(u.Menu,{anchorEl:e.anchorEl,open:e.open,onClose:e.onClose},i.default.createElement(u.MenuItem,{disabled:!0},"Jump to…"),f.config.regions.map((a=>i.default.createElement(u.MenuItem,{key:a.title,onClick:()=>{var n;n=a,e.onClose(),t(n.bbox)}},a.title))))};t.Controls=()=>{const[e,t]=(0,i.useState)(null),a=i.default.useRef(null),{setLegendDrawerOpen:n,setSettingsDrawerOpen:l,setShareSheetOpen:r}=(0,m.useAppState)(),o=i.default.useRef(null),d=i.default.useRef(null);return(0,i.useEffect)((()=>{if(!localStorage.quickNav){const e=()=>{(()=>{const e=d.current.getBoundingClientRect();o.current.start({clientX:e.left+e.width/2,clientY:e.top+e.height/2},{center:!1}),setTimeout((()=>o.current.stop({})),320)})(),localStorage.quickNav||(a.current=setTimeout(e,2e3))};e()}}),[]),i.default.createElement(i.default.Fragment,null,i.default.createElement(g,null,i.default.createElement(y,null,i.default.createElement(u.Tooltip,{title:"Quick Navigation"},i.default.createElement(u.IconButton,{ref:d,onClick:e=>{localStorage.quickNav=!0,a.current&&clearTimeout(a.current),t(e.currentTarget)},size:"large"},i.default.createElement(h.default,{ref:o,center:!0}),i.default.createElement(s.NearMe,null)))),i.default.createElement(y,null,i.default.createElement(u.Tooltip,{title:"Map Legend"},i.default.createElement(u.IconButton,{onClick:()=>n(!0),size:"large"},i.default.createElement(s.Layers,null)))),i.default.createElement(y,null,i.default.createElement(u.Tooltip,{title:"Map Settings"},i.default.createElement(u.IconButton,{onClick:()=>l(!0),size:"large"},i.default.createElement(s.Settings,null)))),i.default.createElement(y,null,i.default.createElement(u.Tooltip,{title:"Share"},i.default.createElement(u.IconButton,{onClick:()=>r(!0),size:"large"},i.default.createElement(s.Share,null)))),i.default.createElement(y,null,i.default.createElement(u.Tooltip,{title:"Contribute on GitHub"},i.default.createElement(u.IconButton,{href:"https://github.com/RailFansCanada/RailFansMap",size:"large"},i.default.createElement(s.GitHub,null))),i.default.createElement(u.Divider,null),i.default.createElement(u.Tooltip,{title:"Submit Feeback"},i.default.createElement(u.IconButton,{href:"mailto:map@railfans.ca?subject=Map%20Feedback&body=Report%20a%20bug%20or%20suggest%20a%20feature",size:"large"},i.default.createElement(s.Feedback,null))))),i.default.createElement(c.ShareSheet,null),i.default.createElement(b,{anchorEl:e,open:Boolean(e),onClose:()=>{t(null)}}))}},9195:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LayerOption2=t.LayerOption=void 0;const l=n(a(3732)),r=a(9826),o=n(a(9507)),i=n(a(5014)),u=(0,o.default)((e=>({root:{margin:e.spacing(2),borderRadius:8},header:{marginBottom:e.spacing(1)},button:{display:"flex",flexDirection:"row",justifyContent:"start"},content:{display:"flex",flexDirection:"column",flexGrow:1},selected:{backgroundColor:e=>(0,r.alpha)(e.tint,.1)},imagery:{display:"flex",flexGrow:0,flexShrink:0,width:88,height:88,margin:e.spacing(1),borderRadius:"100%",overflow:"hidden",background:e.palette.background.default,filter:"grayscale(1)",transition:e.transitions.create("filter"),"& img":{width:"100%",height:"100%"},border:`1px solid ${e.palette.text.disabled}`},imagerySelected:{filter:"grayscale(0)",borderColor:e=>e.tint}})));t.LayerOption=e=>{var t;const a=(0,r.useTheme)(),n=u({tint:null!==(t=e.tint)&&void 0!==t?t:a.palette.secondary.main});return l.default.createElement(r.Card,{className:(0,i.default)(n.root,{[n.selected]:e.selected}),variant:"outlined"},l.default.createElement(r.CardActionArea,{className:n.button,onClick:()=>{var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)}},e.imageUrl&&l.default.createElement("div",{className:(0,i.default)(n.imagery,{[n.imagerySelected]:e.selected})},l.default.createElement("img",{src:e.imageUrl})),l.default.createElement(r.CardContent,{className:n.content},l.default.createElement(r.Typography,{className:n.header,variant:"h6"},e.primary),l.default.createElement(r.Typography,{variant:"body1"},e.secondary))))},t.LayerOption2=e=>{var t;const a=(0,r.useTheme)(),n=u({tint:null!==(t=e.tint)&&void 0!==t?t:a.palette.secondary.main});return l.default.createElement(r.ListItem,{className:(0,i.default)(n.selected)},e.imageUrl&&l.default.createElement(r.ListItemAvatar,null,l.default.createElement("img",{src:e.imageUrl})),l.default.createElement(r.ListItemText,{primary:e.primary,secondary:e.secondary}))}},8650:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LegendDrawer=void 0;const i=r(a(3732)),u=a(9826),s=o(a(5815)),c=a(1264),d=a(5786),f=a(1953),p=a(9654),m=a(7477),h=a(9643),g=s.default.div`
  width: 5px;
  background-color: ${e=>e.tint};
  display: flex;
  align-self: stretch;
  margin: ${({theme:e})=>e.spacing(1)};
`,y=(0,s.default)(u.ListItem)`
  filter: ${({checked:e})=>e?"grayscale(0)":"grayscale(1)"};
  transition: ${({theme:e})=>e.transitions.create("filter")};

  & .Mui-disabled {
    opacity: 1;
  }
`,b=e=>{const{setTarget:t}=(0,f.useMapTarget)(),[a]=(0,m.useWindow)(),n=(0,u.useTheme)(),{setLegendDrawerOpen:l}=(0,p.useAppState)();return i.default.createElement(y,{disablePadding:!0,dense:!0,checked:e.enabled,secondaryAction:e.filterKey&&!e.filterKey.startsWith("!")&&i.default.createElement(u.Checkbox,{style:{color:e.tint},checked:e.enabled,onChange:e.onChecked,edge:"end"})},i.default.createElement(u.ListItemButton,{disabled:!e.enabled,onClick:()=>{null!=e.bbox&&t(e.bbox),a<=n.breakpoints.values.md&&l(!1)}},e.icon&&i.default.createElement(u.ListItemAvatar,null,i.default.createElement("img",{src:e.icon})),i.default.createElement(g,{tint:e.tint}),i.default.createElement(u.ListItemText,{primary:e.title,secondary:e.description})))},v=s.default.div`
  width: 100%;
  box-sizing: border-box;
  overflow-x: hidden;
`,E=(0,s.default)(u.ListItemButton)`
  width: 100%;
  display: flex;
  box-sizing: border-box;
  justify-content: space-between;
  align-items: center;
  padding: ${({theme:e})=>e.spacing(2)};
`,w=e=>{var t;const a=(0,u.useTheme)(),{lineFilterState:n,setLineFiltered:l,legendGroupState:r,setLegendGroupOpen:o}=(0,p.useAppState)(),s=(0,i.useRef)(null),c=null!==(t=r[e.agency.id])&&void 0!==t&&t;return i.default.createElement(v,{ref:s},i.default.createElement(E,{onClick:()=>{o(e.agency.id,!c),c||setTimeout((()=>{var e;null===(e=s.current)||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"})}),300)}},i.default.createElement(u.Typography,{variant:"subtitle1"},e.agency.name),i.default.createElement("div",null,i.default.createElement(d.Chevron,{down:c,color:a.palette.text.primary}))),i.default.createElement(u.Collapse,{in:c},e.entries.map((e=>{const t=(0,h.isLineEnabled)(e.filterKey,n);return i.default.createElement(b,{key:e.id,...e,enabled:t,onChecked:()=>{l(e.filterKey,!t)}})}))),i.default.createElement(u.Divider,null))};t.LegendDrawer=e=>{const{legendDrawerOpen:t,setLegendDrawerOpen:a}=(0,p.useAppState)();return i.default.createElement(c.MenuDrawer,{open:t,onClose:()=>a(!1),title:"Map Legend"},i.default.createElement(u.List,null,e.allAgencies.map((t=>{const a=t.data.map((t=>{var a,n;return{...null===(a=e.data[t])||void 0===a?void 0:a.metadata,bbox:null===(n=e.data[t])||void 0===n?void 0:n.bbox}})).filter((e=>"rail-line"===(null==e?void 0:e.type))).map((e=>({id:e.id,title:e.name,description:e.description,tint:e.color,bbox:e.bbox,icon:`icons/${e.icon}`,filterKey:e.filterKey})));return i.default.createElement(w,{agency:t,key:t.id,entries:a})}))))}},4152:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MenuOption=t.SwitchOption=void 0;const l=n(a(3732)),r=a(9826);t.SwitchOption=e=>{const t=()=>{e.onToggle(!e.checked)};return l.default.createElement(r.ListItem,{disabled:e.disabled,onClick:t,button:!0},l.default.createElement(r.ListItemText,{primary:e.primary,secondary:e.secondary}),l.default.createElement(r.ListItemSecondaryAction,null,l.default.createElement(r.Switch,{disabled:e.disabled,onChange:t,checked:e.checked,edge:"end"})))},t.MenuOption=e=>{const[t,a]=l.default.useState(null);return l.default.createElement(l.default.Fragment,null,l.default.createElement(r.ListItem,{onClick:e=>{a(e.currentTarget)},button:!0},l.default.createElement(r.ListItemText,{primary:e.primary,secondary:e.options[e.value]})),l.default.createElement(r.Menu,{open:null!=t,anchorEl:t},e.options.map(((t,n)=>l.default.createElement(r.MenuItem,{key:t,onClick:()=>(t=>{null==e||e.onChange(t),a(null)})(n),selected:e.value===n},t)))))}},1264:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MenuDrawer=void 0;const l=n(a(3732)),r=a(9826),o=n(a(5815)),i=a(54),u=n(a(589)),s=(0,o.default)(r.Drawer)`
  & .MuiDrawer-paper {
    width: 420px;
    ${({theme:e})=>e.breakpoints.down("md")} {
      width: 100%;
    }
    box-shadow: ${({theme:e})=>e.shadows[4]};
  }
`,c=(0,o.default)(r.AppBar)`
  background-color: ${({theme:e})=>e.palette.background.default};
  display: flex;
  flex-grow: 0;
`,d=(0,o.default)(r.IconButton)`
  margin-right: ${({theme:e})=>e.spacing(2)};
`,f=(0,o.default)(r.Typography)`
  flex-grow: 1;
  color: ${({theme:e})=>e.palette.text.primary};
`,p=o.default.div`
  display: flex;
  flex-grow: 1;
  height: 100%;
`;t.MenuDrawer=e=>l.default.createElement(s,{variant:"persistent",anchor:"right",open:e.open,elevation:4},l.default.createElement(c,{position:"static"},l.default.createElement(r.Toolbar,null,l.default.createElement(d,{edge:"start",size:"large",onClick:e.onClose},l.default.createElement(i.Close,null)),l.default.createElement(f,{variant:"h6"},e.title))),l.default.createElement(p,null,l.default.createElement(u.default,null,e.children)))},2346:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsDrawer=void 0;const l=n(a(3732)),r=a(9826),o=a(9195),i=a(4152),u=a(1264),s=a(9654),c=n(a(5815)),d=["Follow System Settings","Light","Dark"],f=e=>"system"===e?0:"light"===e?1:2,p=(0,c.default)(r.Typography)`
  width: 100%;
  padding: ${({theme:e})=>e.spacing(0,2)};
  margin: ${({theme:e})=>e.spacing(2,0,0,0)};
  box-sizing: border-box;
  display: block;
`;t.SettingsDrawer=()=>{const{settingsDrawerOpen:e,setSettingsDrawerOpen:t,show3DBuildings:a,setShow3DBuildings:n,showLabels:c,setShowLabels:m,mapStyle:h,setMapStyle:g,appTheme:y,setAppTheme:b}=(0,s.useAppState)();return l.default.createElement(u.MenuDrawer,{open:e,onClose:()=>{t(!1)},title:"Map Settings"},l.default.createElement(p,{variant:"overline"},"Basemap"),l.default.createElement(o.LayerOption,{primary:"Vector Basemap",secondary:"Basic vector basemap in either light or dark themes",selected:"vector"===h,onClick:()=>g("vector")}),l.default.createElement(o.LayerOption,{primary:"Satellite Basemap",secondary:"Satellite imagery",selected:"satellite"===h,onClick:()=>g("satellite")}),l.default.createElement(r.Divider,null),l.default.createElement(p,{variant:"overline"},"Other Settings"),l.default.createElement(r.List,null,l.default.createElement(i.SwitchOption,{primary:"Show 3D buildings",checked:a,onToggle:e=>n(e)}),l.default.createElement(i.SwitchOption,{primary:"Show station labels",checked:c,onToggle:e=>m(e)}),l.default.createElement(i.MenuOption,{primary:"Choose Theme",options:d,value:f(y),onChange:e=>{switch(e){case 0:b("system");break;case 1:b("light");break;case 2:b("dark")}}})),l.default.createElement(r.Divider,null),l.default.createElement(p,{variant:"overline"},"About"),l.default.createElement(r.List,null,l.default.createElement(r.ListItemButton,{href:"https://www.iubenda.com/privacy-policy/15954265"},l.default.createElement(r.ListItemText,{primary:"Privacy Policy"})),l.default.createElement(r.ListItem,{dense:!0},l.default.createElement(r.ListItemText,{primary:"Version",secondary:"3.2.3"})),l.default.createElement(r.ListItem,{dense:!0},l.default.createElement(r.ListItemText,{primary:"Built at",secondary:new Date(1642785360685).toLocaleString()}))))}},4632:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ShareSheet=void 0;const l=a(9826),r=n(a(9507)),o=a(54),i=n(a(3732)),u=a(9654),s=(0,r.default)((e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},shareButton:{textTransform:"none",fontSize:e.typography.body1.fontSize,background:e.palette.background.default,"&:hover":{background:e.palette.background.default},margin:e.spacing(0,3,2,3),maxWidth:"100%"},dialogContent:{listStyle:"none",display:"flex",flexDirection:"column",padding:e.spacing(1,0)},buttonText:{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}))),c=(0,r.default)((e=>({root:{color:e.palette.text.primary}}))),d=e=>{const t=c(),a=()=>{e.onCheck(!e.checked)};return i.default.createElement(l.ListItem,{button:!0,onClick:a,dense:!0},i.default.createElement(l.ListItemText,{primary:e.primary,secondary:e.secondary}),i.default.createElement(l.ListItemSecondaryAction,null,i.default.createElement(l.Checkbox,{color:"primary",className:t.root,checked:e.checked,edge:"start",onChange:a})))};t.ShareSheet=()=>{const{shareSheetOpen:e,setShareSheetOpen:t,lineFilterState:a,appTheme:n,mapStyle:r}=(0,u.useAppState)(),c=s(),[f,p]=i.default.useState(null),[m,h]=i.default.useState(!0),[g,y]=i.default.useState(!1),[b,v]=i.default.useState(!1),E=()=>{t(!1)},w=()=>{const e=location.protocol,t=location.host,n=new URL(`${e}//${t}/`);if(m&&(n.hash=location.hash),g&&n.searchParams.append("map","satellite"),b){const e=Object.keys(a).filter((e=>a[e])).map((e=>e)).join(",");n.searchParams.append("show",e)}return n.toString()};return i.default.createElement(i.default.Fragment,null,i.default.createElement(l.Dialog,{fullWidth:!0,maxWidth:"sm",onClose:E,open:e},i.default.createElement(l.DialogTitle,null,i.default.createElement(l.Typography,{variant:"h6"},"Share This Map"),i.default.createElement(l.IconButton,{className:c.closeButton,onClick:E,size:"large"},i.default.createElement(o.Close,null))),i.default.createElement(l.DialogContent,{className:c.dialogContent},i.default.createElement(l.Button,{className:c.shareButton,onClick:()=>{var e;navigator.share?navigator.share({title:"Rail Fans Map",url:w()}):navigator.clipboard.writeText&&(e=w(),navigator.clipboard.writeText(e).then((()=>{p("Copied to clipboard")})).catch((()=>{p("Could not copy to clipboard")})))},endIcon:i.default.createElement(o.ContentCopy,null)},i.default.createElement("span",{className:c.buttonText},w())),i.default.createElement(d,{primary:"Current Location",secondary:"Share the map with the current location visible",checked:m,onCheck:e=>h(e)}),i.default.createElement(d,{primary:"Satellite Basemap",secondary:"Share the map using the satellite basemap",checked:g,onCheck:e=>y(e)}),i.default.createElement(d,{primary:"Include Toggled Lines",secondary:"Show all lines that have been toggled in the legend",checked:b,onCheck:e=>v(e)}))),i.default.createElement(l.Snackbar,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:null!=f,onClose:()=>p(null),message:f,autoHideDuration:2400}))}},1987:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const l=n(a(9455));t.config=l.default},9654:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useAppState=t.ProvideAppState=void 0;const i=o(a(4634)),u=r(a(3732)),s=(0,u.createContext)(null);t.ProvideAppState=e=>{const t=(()=>{const[e,t]=(0,u.useState)(!1),[a,n]=(0,u.useState)(!1),[l,r]=(0,u.useState)(!1),[o,s]=(0,u.useState)(!1),[c,d]=(0,u.useState)(!0),[f,p]=(0,u.useState)("system"),[m,h]=(0,u.useState)("vector"),[g,y]=(0,u.useState)(null),[b,v]=(0,u.useState)({}),[E,w]=(0,u.useState)({});(0,u.useEffect)((()=>{var e,t,a,n,l,r;const o=(()=>{if(null==localStorage.settings)return{};const e=JSON.parse(localStorage.settings);if(null==e.version){const{showLineLabels:t,...a}=e;return{...a,showLabels:t}}return e})(),u=(()=>{const e=new URLSearchParams(location.search);return(0,i.default)({},(t=>{var a,n,l,r;if((null===(a=e.get("map"))||void 0===a?void 0:a.includes("satellite"))?t.mapStyle="satellite":(null===(n=e.get("map"))||void 0===n?void 0:n.includes("vector"))&&(t.mapStyle="vector"),(null===(l=e.get("theme"))||void 0===l?void 0:l.includes("light"))?t.appTheme="light":(null===(r=e.get("theme"))||void 0===r?void 0:r.includes("dark"))&&(t.appTheme="dark"),e.get("show")){const a=e.get("show").split(",");t.lineFilterState={},a.forEach((e=>{t.lineFilterState[e]=!0}))}}))})(),c={...o,...u,lineFilterState:{...o.lineFilterState,...u.lineFilterState}};s(null!==(e=c.show3DBuildings)&&void 0!==e&&e),d(null===(t=c.showLabels)||void 0===t||t),p(null!==(a=c.appTheme)&&void 0!==a?a:"system"),h(null!==(n=c.mapStyle)&&void 0!==n?n:"vector"),v(null!==(l=c.lineFilterState)&&void 0!==l?l:{}),w(null!==(r=c.legendGroupState)&&void 0!==r?r:{}),y(c.lastLocation)}),[]);const _={settingsDrawerOpen:e,setSettingsDrawerOpen:t,legendDrawerOpen:a,setLegendDrawerOpen:n,shareSheetOpen:l,setShareSheetOpen:r,show3DBuildings:o,setShow3DBuildings:s,showLabels:c,setShowLabels:d,appTheme:f,setAppTheme:p,mapStyle:m,setMapStyle:h,lineFilterState:b,setLineFiltered:(e,t)=>{v({...b,[e]:t})},legendGroupState:E,setLegendGroupOpen:(e,t)=>{w({...E,[e]:t})},lastLocation:g,setLastLocation:y};return(0,u.useEffect)((()=>{(e=>{const{settingsDrawerOpen:t,legendDrawerOpen:a,shareSheetOpen:n,...l}=e;localStorage.settings=JSON.stringify({...l,version:"3.2"})})(_)})),_})();return u.default.createElement(s.Provider,{value:t},e.children)},t.useAppState=()=>(0,u.useContext)(s)},6454:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useData=t.ProvideData=void 0;const i=r(a(3732)),u=a(1987),s=o(a(4634)),c=o(a(3678)),d=o(a(1590)),f=o(a(5748)),p=i.default.createContext({data:{},agencies:u.config.agencies,visible:[],updateBbox:()=>{}});t.ProvideData=e=>{const t=(()=>{const[e,t]=i.default.useState([0,0,0,0]),[a,n]=i.default.useState({data:{},agencies:u.config.agencies,visible:[],updateBbox:e=>{t(e)}});return i.default.useEffect((()=>{u.config.agencies.forEach((e=>{e.data.forEach((e=>{(async e=>{const t=await fetch(`data/${e}`);if(!t.ok)throw`Could not load ${e}`;return await t.json()})(e).then((t=>n((a=>(0,s.default)(a,(a=>{a.data[e]=t})))))).catch((e=>console.error(e)))}))}))}),[]),i.default.useEffect((()=>{const t=(0,f.default)(e),a=u.config.agencies.filter((e=>{const a=(0,f.default)(e.bbox);return(0,d.default)(t,a)||(0,c.default)(a,t)||(0,c.default)(t,a)}));n((e=>(0,s.default)(e,(e=>{e.visible=a}))))}),[e]),a})();return i.default.createElement(p.Provider,{value:t},e.children)},t.useData=()=>(0,i.useContext)(p)},1953:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useMapTarget=t.ProvideMapTarget=void 0;const o=r(a(3732)),i=o.default.createContext(null);t.ProvideMapTarget=e=>{const t=(()=>{const[e,t]=(0,o.useState)();return{target:e,setTarget:e=>{t(e)}}})();return o.default.createElement(i.Provider,{value:t},e.children)},t.useMapTarget=()=>(0,o.useContext)(i)},7477:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useWindow=t.ProvideWindow=void 0;const o=r(a(3732)),i=o.default.createContext([0,0]);t.ProvideWindow=e=>{const t=(()=>{const[e,t]=(0,o.useState)([window.innerWidth,window.innerHeight]);return(0,o.useEffect)((()=>{window.addEventListener("resize",(()=>{t([window.innerWidth,window.innerHeight])}))}),[]),e})();return o.default.createElement(i.Provider,{value:t},e.children)},t.useWindow=()=>(0,o.useContext)(i)},8983:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),a(6313);const l=n(a(3732)),r=n(a(8488)),o=a(5815),i=a(2828),u=o.createGlobalStyle`
  html,
  body {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
  }

  #content {
    height: 100%;
  }

  ::selection {
    background: #f44336;
  }
`;r.default.render(l.default.createElement(l.default.StrictMode,null,l.default.createElement(u,null),l.default.createElement(i.App,null)),document.getElementById("content"))},9455:e=>{e.exports=JSON.parse('{"agencies":[{"id":"grt","name":"GRT","bbox":[-80.545261,43.419397,-80.44124409556389,43.501633],"data":["waterloo/ion.json","waterloo/ionOMSF.json"]},{"id":"oc-transpo","name":"OC Transpo","bbox":[-75.93239095708121,45.26587692566606,-75.47978870927166,45.49642647588418],"data":["ottawa/belfastYard.json","ottawa/greenbankYard.json","ottawa/moodieYard.json","ottawa/walkleyYard.json","ottawa/line1.json","ottawa/line2.json","ottawa/line3.json","ottawa/line4.json","ottawa/stage3barrhaven.json","ottawa/stage3kanata.json"]},{"id":"sto","name":"STO","bbox":[-75.86578535776559,45.39536917415158,-75.69585303512089,45.43724924103122],"data":["gatineau/a.json","gatineau/b.json"]},{"id":"ttc","name":"TTC","bbox":[-79.60331150195182,43.63443706290249,-79.2443698561092,43.795826398803186],"data":["toronto/davisvilleYard.json","toronto/wilsonYard.json","toronto/greenwoodYard.json","toronto/keeleYard.json","toronto/mccowanYard.json","toronto/eglintonMSF.json","toronto/finchMSF.json","toronto/sheppardWye.json","toronto/bloorYongeConnectors.json","toronto/ontarioLineMSF.json","toronto/line1.json","toronto/line2.json","toronto/line3.json","toronto/line4.json","toronto/line5.json","toronto/line6.json","toronto/line5west.json","toronto/sse.json","toronto/ontarioLine.json"]}],"regions":[{"id":"waterloo","title":"Kitchener-Waterloo","agencies":["grt"],"location":[-80.5,43.466667],"bbox":[-80.54520517587662,43.4221650454896,-80.44124409556389,43.50163426403371]},{"id":"ottawa-gatineau","title":"Ottawa-Gatineau","agencies":["oc-transpo","sto"],"location":[-75.691042,45.420472],"bbox":[-75.93239095708121,45.26587692566606,-75.47978870927166,45.49642647588418]},{"id":"toronto","title":"Toronto","agencies":["ttc"],"location":[-79.383849,43.653482],"bbox":[-79.60331150195182,43.63443706290249,-79.2443698561092,43.795826398803186]}]}')}},a={};function n(e){var l=a[e];if(void 0!==l)return l.exports;var r=a[e]={exports:{}};return t[e].call(r.exports,r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,a,l,r)=>{if(!a){var o=1/0;for(c=0;c<e.length;c++){for(var[a,l,r]=e[c],i=!0,u=0;u<a.length;u++)(!1&r||o>=r)&&Object.keys(n.O).every((e=>n.O[e](a[u])))?a.splice(u--,1):(i=!1,r<o&&(o=r));if(i){e.splice(c--,1);var s=l();void 0!==s&&(t=s)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,l,r]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var l,r,[o,i,u]=a,s=0;if(o.some((t=>0!==e[t]))){for(l in i)n.o(i,l)&&(n.m[l]=i[l]);if(u)var c=u(n)}for(t&&t(a);s<o.length;s++)r=o[s],n.o(e,r)&&e[r]&&e[r][0](),e[o[s]]=0;return n.O(c)},a=self.webpackChunkotrainmap=self.webpackChunkotrainmap||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=n.O(void 0,[610],(()=>n(8983)));l=n.O(l)})();